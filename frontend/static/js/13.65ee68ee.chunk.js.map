{"version":3,"sources":["components/settings/pages/EducationPage.js","components/settings/SettingsLayout.js"],"names":["EducationSettings","state","isFetching","error","data","handleError","bind","handleClose","fetchData","a","setState","Fetcher","HTTP","ADDR","response","console","log","sendFormHandler","e","preventDefault","undefined","JSON","stringify","addField","title","period","description","changeField","key","name","value","slice","Object","assign","deleteField","this","className","onSubmit","map","field","i","EducationFieldBlock","formKey","onChange","onDelete","type","onClick","text","React","Component","props","target","header","Line","children","Column","SmallTextField","SelectField","options","option","LargeTextField","SmallFileField","forwardRef","ref"],"mappings":"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","file":"static/js/13.65ee68ee.chunk.js","sourcesContent":["import React from \"react\";\nimport {Column, LargeTextField, Line, SmallTextField} from \"../SettingsLayout\";\nimport Loading from \"../../loader/LoadingPage\";\nimport Fetcher from \"../../../functools/Fetcher\";\nimport {HTTP, ADDR} from \"../../../address\";\nimport InfoPopup, {handleError, handleClose} from \"../../infoPopup/infoPopup\";\nexport default class EducationSettings extends React.Component{\n    state ={\n        isFetching: false,\n        error: null,\n        data: [],\n    };\n    handleError = handleError.bind(this);\n    handleClose = handleClose.bind(this);\n    fetchData = async () =>{\n        this.setState({isFetching: true});\n        const [error, response] = await Fetcher(HTTP + ADDR + \"/settings/get_edu_emp\");\n        if (error === null){\n            console.log(response);\n            this.setState({data: response});\n        }else {\n            this.handleError(\"Невозможно получить данные с сервера\");\n            this.setState({data: []});\n        }\n        this.setState({isFetching: false});\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    sendFormHandler = async (e)=> {\n        e.preventDefault();\n        const [error] = await Fetcher(HTTP + ADDR + \"/settings/post_edu_emp\",\n            undefined, \"POST\", \"text\", JSON.stringify(this.state.data));\n        if (error !== null){\n            this.handleError(\"Невозможно обновить данные\");\n        }\n    };\n\n\n    addField = ()=>{\n        this.setState(({data}) => ({data: [...data, {title: '', period: '', description: ''}]}));\n    };\n\n    changeField = (key, name, value)=>{\n        this.setState(({data}) => ({data: [\n                ...data.slice(0,key),\n                Object.assign({}, data[key], {[name]:value}),\n                ...data.slice(key + 1)\n            ]}));\n    };\n\n    deleteField = key => {\n        this.setState(({data}) => ({data: [\n                ...data.slice(0,key),\n                undefined,\n                ...data.slice(key + 1)\n            ]}));\n    };\n\n    render() {\n        if (this.state.isFetching){\n            return <Loading/>\n        }else {\n            return(\n                <div className={\"default_block\"}>\n                    <div className={\"default_block__header\"}>Образование и работа</div>\n                    <form onSubmit={this.sendFormHandler}>\n                        {\n                            this.state.data?.map((field, i)=>\n                                field && <EducationFieldBlock key={i}\n                                                              formKey={i}\n                                                              onChange = {this.changeField}\n                                                              onDelete = {this.deleteField}\n                                                              {...field}\n                                />\n                            )\n\n                        }\n\n                        <Line>\n                            <button type={\"button\"}\n                                    className={\"default_button add_field__button\"}\n                                    onClick={this.addField}>+ Добавить новое поле\n                            </button>\n                        </Line>\n\n                        <Line>\n                            <button className={\"default_button cancel_button\"}>Отменить</button>\n                            <button className={\"default_button confirm_button\"} type={\"submit\"}>Сохранить изменения</button>\n                        </Line>\n                    </form>\n                    {this.state.error && <InfoPopup text = {this.state.error} handleClose = {this.handleClose}/>}\n                </div>\n            )\n        }\n    }\n}\n\nfunction EducationFieldBlock(props) {\n\n    const onChange = ({target})=> props.onChange(props.formKey, target.name, target.value);\n\n    const onDelete = () => {\n        props.onDelete(props.formKey);\n    };\n\n    return (\n        <Column>\n            <Line>\n                <SmallTextField header={\"Название\"}\n                                type=\"text\"\n                                value={props.title}\n                                name = \"title\"\n                                onChange={onChange}\n                />\n                <button type={\"button\"} className={\"default_button education__delete_button\"} onClick={onDelete}>x</button>\n                <SmallTextField header={\"Период времени\"}\n                                type=\"text\"\n                                value={props.period}\n                                name = \"period\"\n                                onChange={onChange}\n                />\n            </Line>\n            <Line>\n                <LargeTextField header={\"Описание\"}\n                                value={props.description}\n                                name = \"description\"\n                                onChange={onChange}\n                />\n            </Line>\n        </Column>\n    )\n}","import React from \"react\";\nimport \"../../scss/default_blocks.scss\"\n\nexport function Line({children}) {\n    return (\n        <div className={\"default_container default_line\"}>\n            {children}\n        </div>\n    )\n}\n\nexport function Column({children}) {\n    return (\n        <div className={\"default_container default_column\"}>\n            {children}\n        </div>\n    )\n}\n\nexport function SmallTextField({header,...props}) {\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <input className={\"default_field__input\"} {...props}/>\n        </div>\n    )\n}\n\nexport function SelectField({header, options=[], value = \"\", ...props}){\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <select className={\"default_field__input\"} value = {value} {...props}>\n                {options.map(option=><option key = {option} >{option}</option>)}\n            </select>\n        </div>\n    )\n}\n\nexport function LargeTextField({header, ...props}) {\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <textarea className={\"default_field__input\"} {...props}/>\n        </div>\n    )\n}\n\nexport const SmallFileField = React.forwardRef(({header, ...props}, ref)=>(\n    <div className={\"default_field\"}>\n        <p className={\"default_field__label\"}>{header}</p>\n        <input className=\"default_field__input\" type={\"file\"} {...props} ref = {ref}/>\n    </div>\n));"],"sourceRoot":""}