{"version":3,"sources":["components/weather/weather_icon_constants.js","components/weather/WeatherPage.js"],"names":["WWO_CODE","WEATHER_SYMBOL","WeatherPage","state","weatherInfo","error","handleError","bind","handleClose","debounced","Debounce","event","getWeather","target","value","onChange","persist","city","a","localStorage","setItem","url","replace","options","method","headers","fetch","response","ok","json","setState","getItem","this","className","WeatherTopBlock","type","placeholder","defaultValue","ExtendedForecastBlock","weather","text","React","Component","days_of_week","map","day","key","date","Date","getDay","hourly","hour","time","weatherCode","style","fontSize","tempC","marginTop","lang_ru","console","log","toLocaleString","month","weekday","timezone","nearest_area","areaName","current_condition","temp_C","mintempC","maxtempC","FeelsLikeC","humidity","pressure","toFixed","windspeedKmph","localObsDateTime"],"mappings":"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","file":"static/js/12.e720dc34.chunk.js","sourcesContent":["export const WWO_CODE = {\n    \"113\": \"Sunny\",\n    \"116\": \"PartlyCloudy\",\n    \"119\": \"Cloudy\",\n    \"122\": \"VeryCloudy\",\n    \"143\": \"Fog\",\n    \"176\": \"LightShowers\",\n    \"179\": \"LightSleetShowers\",\n    \"182\": \"LightSleet\",\n    \"185\": \"LightSleet\",\n    \"200\": \"ThunderyShowers\",\n    \"227\": \"LightSnow\",\n    \"230\": \"HeavySnow\",\n    \"248\": \"Fog\",\n    \"260\": \"Fog\",\n    \"263\": \"LightShowers\",\n    \"266\": \"LightRain\",\n    \"281\": \"LightSleet\",\n    \"284\": \"LightSleet\",\n    \"293\": \"LightRain\",\n    \"296\": \"LightRain\",\n    \"299\": \"HeavyShowers\",\n    \"302\": \"HeavyRain\",\n    \"305\": \"HeavyShowers\",\n    \"308\": \"HeavyRain\",\n    \"311\": \"LightSleet\",\n    \"314\": \"LightSleet\",\n    \"317\": \"LightSleet\",\n    \"320\": \"LightSnow\",\n    \"323\": \"LightSnowShowers\",\n    \"326\": \"LightSnowShowers\",\n    \"329\": \"HeavySnow\",\n    \"332\": \"HeavySnow\",\n    \"335\": \"HeavySnowShowers\",\n    \"338\": \"HeavySnow\",\n    \"350\": \"LightSleet\",\n    \"353\": \"LightShowers\",\n    \"356\": \"HeavyShowers\",\n    \"359\": \"HeavyRain\",\n    \"362\": \"LightSleetShowers\",\n    \"365\": \"LightSleetShowers\",\n    \"368\": \"LightSnowShowers\",\n    \"371\": \"HeavySnowShowers\",\n    \"374\": \"LightSleetShowers\",\n    \"377\": \"LightSleet\",\n    \"386\": \"ThunderyShowers\",\n    \"389\": \"ThunderyHeavyRain\",\n    \"392\": \"ThunderySnowShowers\",\n    \"395\": \"HeavySnowShowers\",\n}\nexport const WEATHER_SYMBOL = {\n    \"Unknown\":             \"‚ú®\",\n    \"Cloudy\":              \"‚òÅÔ∏è\",\n    \"Fog\":                 \"üå´\",\n    \"HeavyRain\":           \"üåß\",\n    \"HeavyShowers\":        \"üåß\",\n    \"HeavySnow\":           \"‚ùÑÔ∏è\",\n    \"HeavySnowShowers\":    \"‚ùÑÔ∏è\",\n    \"LightRain\":           \"üå¶\",\n    \"LightShowers\":        \"üå¶\",\n    \"LightSleet\":          \"üåß\",\n    \"LightSleetShowers\":   \"üåß\",\n    \"LightSnow\":           \"üå®\",\n    \"LightSnowShowers\":    \"üå®\",\n    \"PartlyCloudy\":        \"‚õÖÔ∏è\",\n    \"Sunny\":               \"‚òÄÔ∏è\",\n    \"ThunderyHeavyRain\":   \"üå©\",\n    \"ThunderyShowers\":     \"‚õà\",\n    \"ThunderySnowShowers\": \"‚õà\",\n    \"VeryCloudy\": \"‚òÅÔ∏è\",\n}","import React from \"react\";\nimport {WEATHER_SYMBOL, WWO_CODE} from \"./weather_icon_constants\";\nimport \"./weather_page.scss\";\nimport Debounce from \"../../functools/Debounce\";\nimport InfoPopup, {handleError, handleClose} from \"../infoPopup/infoPopup\";\n\nexport default class WeatherPage extends React.Component{\n    state = {weatherInfo: null, error: null}\n    handleError = handleError.bind(this);\n    handleClose = handleClose.bind(this);\n\n    debounced = new Debounce((event)=> {\n        this.getWeather(event.target.value);\n    }, 1000);\n\n    onChange = (event) => {\n        event.persist()\n        this.debounced(event);\n    }\n\n    componentDidMount() {\n        if (!localStorage.getItem(\"weather_city\")){\n            localStorage.setItem(\"weather_city\",\"–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥\")\n        }\n        this.getWeather(localStorage.getItem(\"weather_city\"));\n    }\n\n    getWeather = async (city)=>{\n        localStorage.setItem(\"weather_city\", city)\n        // cors –∑–∞ —á—Ç–æ :( \n        const url = `https://cors-anywhere.herokuapp.com/http://wttr.in/${city.replace(\" \", \"+\")}?format=j1`;\n        const options = {method: 'get', headers: {'Accept-Language':'ru-RU, ru', 'Access-Control-Allow-Origin': 'wttr.in'}};\n        const response = await fetch(url, options);\n        if (response.ok){\n            this.setState({weatherInfo: await response.json()});\n        }else {\n            this.handleError(\"–°–µ—Ä–≤–µ—Ä –ø–æ–≥–æ–¥—ã –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç\");\n        }\n    }\n\n    render() {\n        return (\n            <div className={\"page__container\"}>\n                <WeatherTopBlock weatherInfo={this.state.weatherInfo}/>\n                <input type={\"text\"}\n                       className={\"weather_city__input\"}\n                       placeholder={\"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥\"}\n                       onChange={this.onChange}\n                       defaultValue={localStorage.getItem(\"weather_city\")}\n                />\n                <ExtendedForecastBlock weather={this.state.weatherInfo?.weather}/>\n                {this.state.error && <InfoPopup text = {this.state.error} handleClose = {this.handleClose}/>}\n            </div>\n        )\n    }\n}\n\n\nconst days_of_week = [\"–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ\", \"–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫\", \"–í—Ç–æ—Ä–Ω–∏–∫\", \"–°—Ä–µ–¥–∞\", \"–ß–µ—Ç–≤–µ—Ä–≥\", \"–ü—è—Ç–Ω–∏—Ü–∞\", \"–°—É–±–±–æ—Ç–∞\" ]\nfunction ExtendedForecastBlock({weather}) {\n    return (\n        <div className={\"extended_forecast__block\"}>\n            {\n                weather?.map((day)=>(\n                        <div key = {day.date} className={\"extended_forecast__item\"}>\n                            <div className={\"extended_forecast_date\"}>{days_of_week[new Date(day.date).getDay()]}</div>\n                            <div className={\"extended_forecast_hours_row\"}>\n                                {\n                                    day.hourly?.map((hour)=>(\n                                        <div key={hour.time} className={\"extended_forecast_hrow__item\"}>\n                                            <div className={\"ex_forecast__hour\"}>{hour.time / 100}:00</div>\n                                            <div className={\"default_img weather_icon\"}>{WEATHER_SYMBOL[WWO_CODE[hour.weatherCode]]} </div>\n                                            <div style={{fontSize:'40px'}}>{hour.tempC}¬∞C</div>\n                                            <div style={{fontSize:'20px', marginTop: \"10px\"}}>{hour.lang_ru[0]?.value}</div>\n                                        </div>\n                                    ))\n                                }\n                            </div>\n                        </div>\n                    )\n                )\n            }\n        </div>\n    )\n}\n\nfunction WeatherTopBlock({weatherInfo}) {\n    console.log(weatherInfo);\n    const getCurrentDate = ()=>(\n        new Date().toLocaleString(\"ru\", {\n            month: 'long',\n            day: 'numeric',\n            weekday: 'long',\n            timezone: 'UTC',\n        })\n    );\n    return (\n        <div className={\"weather_top_block background_pic__city background_pic__city_black\"}>\n            <div className={\"weather_date_and_place\"}>\n                <div className={\"weather__date\"}>{getCurrentDate()}</div>\n                <div className={\"weather__place\"}>{weatherInfo?.nearest_area[0]?.areaName[0]?.value}</div>\n            </div>\n\n            <div className={\"weather_content\"}>\n                <div className={\"default_img weather_icon\"}>{WEATHER_SYMBOL[WWO_CODE[weatherInfo?.current_condition[0]?.weatherCode]]}</div>\n                <div className={\"weather__temp\"}>{weatherInfo?.current_condition[0]?.temp_C}¬∞C</div>\n                <div className={\"temp__minmax\"}>\n                    <span>–ú–∏–Ω: {weatherInfo?.weather[0]?.mintempC}¬∞</span>\n                    <span>–ú–∞–∫—Å: {weatherInfo?.weather[0]?.maxtempC}¬∞</span>\n                </div>\n                <div className={\"weather__description\"}>\n                    {weatherInfo?.current_condition[0].lang_ru[0].value}\n                </div>\n\n                <div className={\"weather__additional_info\"}>\n                    <div className={\"weather__additional_info__block\"}>\n                        <div className={\"default_img real_temp_feel_icon\"}/>\n                        <div>–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫</div>\n                        <div>{weatherInfo?.current_condition[0]?.FeelsLikeC}¬∞</div>\n                    </div>\n\n                    <div className={\"weather__additional_info__block\"}>\n                        <div className={\"default_img humidity_icon\"}/>\n                        <div>–í–ª–∞–∂–Ω–æ—Å—Ç—å</div>\n                        <div>{weatherInfo?.current_condition[0]?.humidity}%</div>\n                    </div>\n\n                    <div className={\"weather__additional_info__block\"}>\n                        <div className={\"default_img pressure_icon\"}/>\n                        <div>–î–∞–≤–ª–µ–Ω–∏–µ</div>\n                        <div>{\n                            weatherInfo?.current_condition[0]?.pressure\n                            &&\n                            (weatherInfo?.current_condition[0]?.pressure / 1.33333).toFixed()\n                        }\n\n                        </div>\n                    </div>\n                    <div className={\"weather__additional_info__block\"}>\n                        <div className={\"default_img wind_icon\"}/>\n                        <div>–°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞</div>\n                        <div>{\n                            weatherInfo?.current_condition[0]?.windspeedKmph\n                            &&\n                            (weatherInfo.current_condition[0].windspeedKmph / 3.6).toFixed(1) } –º/—Å\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className={\"weather_last_observation_time\"}>\n                –û–±–Ω–æ–≤–ª–µ–Ω–æ –≤: {weatherInfo?.current_condition[0]?.localObsDateTime}\n            </div>\n        </div>\n    )\n}"],"sourceRoot":""}