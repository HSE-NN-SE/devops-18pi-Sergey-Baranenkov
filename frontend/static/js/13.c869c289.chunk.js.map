{"version":3,"sources":["components/settings/SettingsLayout.js","components/settings/pages/EducationPage.js"],"names":["Line","children","className","Column","SmallTextField","header","props","SelectField","options","value","map","option","key","LargeTextField","SmallFileField","React","forwardRef","ref","type","EducationSettings","fetchData","a","Fetcher","HTTP","ADDR","error","response","console","log","setState","data","isFetching","sendFormHandler","e","preventDefault","undefined","JSON","stringify","state","addField","title","period","description","changeField","name","slice","Object","assign","deleteField","this","onSubmit","field","i","EducationFieldBlock","formKey","onChange","onDelete","onClick","Component","target"],"mappings":"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","file":"static/js/13.c869c289.chunk.js","sourcesContent":["import React from \"react\";\n\n\nexport function Line({children}) {\n    return (\n        <div className={\"default_container default_line\"}>\n            {children}\n        </div>\n    )\n}\n\nexport function Column({children}) {\n    return (\n        <div className={\"default_container default_column\"}>\n            {children}\n        </div>\n    )\n}\n\nexport function SmallTextField({header,...props}) {\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <input className={\"default_field__input\"} {...props}/>\n        </div>\n    )\n}\n\nexport function SelectField({header, options=[], value = \"\", ...props}){\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <select className={\"default_field__input\"} value = {value} {...props}>\n                {options.map(option=><option key = {option} >{option}</option>)}\n            </select>\n        </div>\n    )\n}\n\nexport function LargeTextField({header, ...props}) {\n    return (\n        <div className={\"default_field\"}>\n            <p className={\"default_field__label\"}>{header}</p>\n            <textarea className={\"default_field__input\"} {...props}/>\n        </div>\n    )\n}\n\nexport const SmallFileField = React.forwardRef(({header, ...props}, ref)=>(\n    <div className={\"default_field\"}>\n        <p className={\"default_field__label\"}>{header}</p>\n        <input className=\"default_field__input\" type={\"file\"} {...props} ref = {ref}/>\n    </div>\n));","import React from \"react\";\nimport {Column, LargeTextField, Line, SmallTextField} from \"../SettingsLayout\";\nimport Loading from \"../../loader/LoadingPage\";\nimport Fetcher from \"../../../functools/Fetcher\";\nimport {HTTP, ADDR} from \"../../../address\";\n\nexport default class EducationSettings extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state ={\n            isFetching: true,\n            error: null,\n            data: [],\n        };\n    }\n\n    fetchData = async () =>{\n        const [error, response] = await Fetcher(HTTP + ADDR + \"/settings/get_edu_emp\");\n        if (error === null){\n            console.log(response);\n            this.setState({data: response, isFetching: false, error: null });\n        }else {\n            this.setState({data: [], isFetching: false, error: error});\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    sendFormHandler = async (e)=> {\n        e.preventDefault();\n\n        const [error] = await Fetcher(HTTP + ADDR + \"/settings/post_edu_emp\",\n            undefined, \"POST\", \"text\", JSON.stringify(this.state.data));\n       console.log(error);\n    };\n\n\n    addField = ()=>{\n        this.setState(({data}) => ({data: [...data, {title: '', period: '', description: ''}]}));\n    };\n\n    changeField = (key, name, value)=>{\n        this.setState(({data}) => ({data: [\n                ...data.slice(0,key),\n                Object.assign({}, data[key], {[name]:value}),\n                ...data.slice(key + 1)\n            ]}));\n    };\n\n    deleteField = key => {\n        this.setState(({data}) => ({data: [\n                ...data.slice(0,key),\n                undefined,\n                ...data.slice(key + 1)\n            ]}));\n    };\n\n    render() {\n        if (this.state.error){\n            return <div>ERROR: {this.state.error}</div>\n        }else if (this.state.isFetching){\n            return <Loading/>\n        }else {\n            return(\n                <div className={\"default_block\"}>\n                    <div className={\"default_block__header\"}>Образование и работа</div>\n                    <form onSubmit={this.sendFormHandler}>\n                        {\n                            this.state.data?.map((field, i)=>\n                                field && <EducationFieldBlock key={i}\n                                                              formKey={i}\n                                                              onChange = {this.changeField}\n                                                              onDelete = {this.deleteField}\n                                                              {...field}\n                                />\n                            )\n\n                        }\n\n                        <Line>\n                            <button type={\"button\"}\n                                    className={\"default_button add_field__button\"}\n                                    onClick={this.addField}>+ Добавить новое поле\n                            </button>\n                        </Line>\n\n                        <Line>\n                            <button className={\"default_button cancel_button\"}>Отменить</button>\n                            <button className={\"default_button confirm_button\"} type={\"submit\"}>Сохранить изменения</button>\n                        </Line>\n                    </form>\n                </div>\n            )\n        }\n    }\n}\n\nfunction EducationFieldBlock(props) {\n\n    const onChange = ({target})=> props.onChange(props.formKey, target.name, target.value);\n\n    const onDelete = () => {\n        props.onDelete(props.formKey);\n    };\n\n    return (\n        <Column>\n            <Line>\n                <SmallTextField header={\"Название\"}\n                                type=\"text\"\n                                value={props.title}\n                                name = \"title\"\n                                onChange={onChange}\n                />\n                <button type={\"button\"} className={\"default_button education__delete_button\"} onClick={onDelete}>x</button>\n                <SmallTextField header={\"Период времени\"}\n                                type=\"text\"\n                                value={props.period}\n                                name = \"period\"\n                                onChange={onChange}\n                />\n            </Line>\n            <Line>\n                <LargeTextField header={\"Описание\"}\n                                value={props.description}\n                                name = \"description\"\n                                onChange={onChange}\n                />\n            </Line>\n        </Column>\n    )\n}"],"sourceRoot":""}